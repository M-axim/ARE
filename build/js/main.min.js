"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(a){var n=_isNativeReflectConstruct();return function(){var t,e=_getPrototypeOf(a);return _possibleConstructorReturn(this,n?(t=_getPrototypeOf(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments))}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _createForOfIteratorHelper(t,e){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,i=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return c=t.done,t},e:function(t){i=!0,l=t},f:function(){try{c||null==a.return||a.return()}finally{if(i)throw l}}}}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var a=[],n=!0,o=!1,l=void 0;try{for(var c,i=t[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!e||a.length!==e);n=!0);}catch(t){o=!0,l=t}finally{try{n||null==i.return||i.return()}finally{if(o)throw l}}return a}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}var TableDB,searchListSetting,mainTable=$(".main__table"),searchLine=$(".field-search__field"),activeSpecialization=0,activeCategory=0,activeClient=0,activeBrand=0,activeCountry=0,activeStaff=0,activeTypeRepair=0,activeEquipment=0,activeTab=0,zIndex=102,Essence=function(){function o(t,e,a,n){_classCallCheck(this,o),this.textAdd=t,this.textEdit=e,this.title=a,this.url=n}return _createClass(o,[{key:"groups",value:function(){}},{key:"row",value:function(t){$.ajax({url:"".concat(this.url,"?id=").concat(t),method:"get",dataType:"json",success:function(t){TableDB.forms.showTable(t)}})}},{key:"delete",value:function(t){null!=t?$.ajax({url:"".concat(this.url,"?id=").concat(t),method:"delete",dataType:"json",async:!1,success:function(t){createModal("message",t.message),showTable()},error:function(t){createModal("message",t.responseJSON.message)}}):createModal("message","Выберите запись")}},{key:"new",value:function(t){$.ajax({url:"".concat(this.url),method:"post",async:!1,processData:!1,contentType:!1,data:t,success:function(t){createModal("message",t.message),$(newForm).trigger("reset")},error:function(t){createModal("message",t.responseJSON.message)}})}},{key:"edit",value:function(t){$.ajax({url:"".concat(this.url),method:"patch",async:!1,data:JSON.stringify(t),processData:!1,success:function(t){createModal("message",t.message)},error:function(t){console.log(t),createModal("message",t.responseJSON.message)}})}},{key:"rows",get:function(){$.ajax({url:"".concat(this.url),method:"get",dataType:"json",success:function(t){TableDB.forms.showTable(t)}})}}]),o}(),Reports=function(){function e(t){_classCallCheck(this,e),this.url=t}return _createClass(e,[{key:"dataReport",value:function(o){$.ajax({url:this.url,method:"post",async:!1,processData:!1,contentType:!1,data:o,success:function(t){var e="export_cvs"===o.get("exportType")?new Blob([t],{type:"text/csv"}):new Blob([t],{type:"application/vnd.ms-excel"}),a=URL.createObjectURL(e),n=document.createElement("a");n.href=a,"export_cvs"===o.get("exportType")?n.download="Отчет.csv":n.download="Отчет.xls",document.body.appendChild(n),n.click()},error:function(){}})}},{key:"showReports",get:function(){}}]),e}(),Forms=function(){function e(t){_classCallCheck(this,e),this.url=t,this.uploadForms()}return _createClass(e,[{key:"getFormData",value:function(t){return new FormData(t.get(0))}},{key:"setFormTypeAdd",value:function(t){t.attr("data-form-type","add")}},{key:"setFormTypeEdit",value:function(t){t.attr("data-form-type","edit")}},{key:"setFormTypeAddGroup",value:function(t){t.attr("data-form-type","addGroup")}},{key:"setFormTypeEditGroup",value:function(t){t.attr("data-form-type","editGroup")}},{key:"showTable",value:function(){}},{key:"search",value:function(t){for(var e="",a=Object.keys(t).length,n=1,o=0,l=Object.entries(t);o<l.length;o++){var c=_slicedToArray(l[o],2),i=c[0],s=c[1];e+=n<a?i+"="+'"'.concat(s.replace(/"/g,"'"),'"&'):i+"="+'"'.concat(s.replace(/"/g,"'"),'"'),n++}$.ajax({url:"".concat(this.url,"?").concat(e),method:"get",dataType:"json",success:function(t){TableDB.forms.showTable(t)}})}},{key:"extendedSearchForm",value:function(){mainTable.append('\n        <div id="extended-search-modal" class="modal h-350">\n            <p class="modal__title" data-modal-title="error">Расширенные настройки поиска</p>\n            <form action="" method="post" class="modal__form" id="extended-search-form">\n\n            <p class="modal__subtitle">Настройка быстрого поиска</p>\n            <label for="current-search-field" class="modal__label modal__label-full modal__label-search">*Осуществлять быстрый поиск по:\n                <div class="modal__search-list" id="current-search-field"></div>\n            </label>\n\n            <p class="modal__subtitle mb-4">Множественный поиск</p>\n                    '.concat(this.formLabel(),'\n            <div class="modal__action">\n                <button type="reset" class="modal__btn pd-5" id="search-form-default">Очистить</button>\n                <button type="submit" class="modal__btn pd-5" id="search-form-entry">Применить</button>\n            </div>\n        </form>\n        <span id="modal__close" class="modal__close">ₓ</span>\n        </div>\n        '))}},{key:"createCopiedModal",value:function(n){0<$("._marked").length?(createModal(n),TableDB.forms.setFormTypeEdit(newForm),$("._marked .table__body__col").each(function(t,e){var a=$(e).attr("data-id");$("#".concat(n," #").concat(a)).val(e.innerHTML)})):createModal("message","Выберите запись")}},{key:"errorForm",value:function(){mainTable.append('\n        <div id="message" class="modal modal-message">\n            <p class="modal__title" data-modal-type="message">Не выбрана модель</p>\n            <button class="modal__close-btn">Закрыть</button>\n            <span class="modal__progress"></span>\n        </div>\n        ')}},{key:"reportsForm",value:function(){mainTable.append('\n        <div id="reports" class="modal h-250">\n            <p class="modal__title" data-modal-title="reports">В каком формате вывести отчет</p>\n            <form action="" method="post" class="modal__form d-flex" id="reports-form">\n                <div class="modal__label w-50">\n                    <button type="submit" name="export_cvs" class="action__btn btn btn__big pd-12 reports-type">\n                        <img class="reports__img" src="img/icon/csv.png" title="Экспортировать в csv" alt="Экспортировать в csv">\n                        <figcaption>Экспортировать в csv</figcaption>\n                    </button>\n                </div>\n                <div class="modal__label w-50">\n                    <button type="submit" name="export_xls" class="action__btn btn btn__big pd-12 reports-type">\n                        <img class="reports__img" src="img/icon/xls.png" title="Экспортировать в xls" alt="Экспортировать в xls">\n                        <figcaption>Экспортировать в xls</figcaption>\n                    </button>\n                </div>\n            </form>\n            <button class="modal__close-btn">Закрыть</button>\n        </div>\n        ')}},{key:"newRecordsForm",value:function(){mainTable.append('\n        <div id="modal" class="modal h-200">\n            <p class="modal__title" id="modal__title"></p>    \n            <form action="" method="post" class="modal__form table-service" id="newForm" data-form-type="add">\n                '.concat(this.formLabel(),'\n                <div class="modal__action">\n                    <button type="reset" class="modal__btn pd-5" id="add-doctor-modal__reset">Очистить</button>\n                    <button type="submit" class="modal__btn pd-5" id="add-modal__submit">Создать</button>\n                </div>\n             </form>\n            <span id="modal__close" class="modal__close">ₓ</span>\n        </div>'))}},{key:"uploadForms",value:function(){}},{key:"checkData",value:function(){$(this).find("input").each(function(t,e){if(removeError($(e)),""===$(e).val())return showError("Поле не может быть пустым",$(e)),0})}},{key:"submitLogic",value:function(t){var c;(0<arguments.length&&void 0!==t?t:null).submit(function(t){if(t.preventDefault(),TableDB.forms.checkData()){var e=TableDB.forms.getFormData($(this));if(c=$(this).attr("data-form-type"),e.append("formType",c),"add"===c||"addGroup"===c)TableDB.new(e);else if("edit"===c||"editGroup"===c){var a,n={},o=_createForOfIteratorHelper(e.entries());try{for(o.s();!(a=o.n()).done;){var l=a.value;""!==l[1].trim()&&(n[l[0]]=l[1])}}catch(t){o.e(t)}finally{o.f()}n.formType=c,n.id="edit"===c?activeRow:activeTab,TableDB.edit(n)}closeModal($("#modal"))}"editGroup"===c&&(closeModal($("#group-modal")),$("#groupName").val(""),TableDB.group.showGroups()),showTable()})}},{key:"groupSubmit",value:function(){}}]),e}(),Group=function(){function e(t){_classCallCheck(this,e),this.url=t,$(".action__btn._hidden").removeClass("_hidden"),this.showTabsSetting,this.groupForm,this.showGroups(),this.selectGroup()}return _createClass(e,[{key:"showGroups",value:function(){this.groups(0),$(".tab-action-edit-btn").click(function(t){t.preventDefault(),createCopiedGroupModal("group-modal",activeTab=this.id),TableDB.forms.setFormTypeEditGroup(newGroup)}),$(".tab-action-delete-btn").click(function(t){t.preventDefault(),activeTab=this.id,TableDB.group.deleteGroup(activeTab)}),this.openModal()}},{key:"groups",value:function(t){$.ajax({url:"".concat(this.url,"?group=").concat(t),method:"get",dataType:"json",async:!1,success:function(t){e.tabsModal(t)}})}},{key:"openModal",value:function(){$("#listGroup").change(function(){"Все вкладки"===$("#listGroup option:selected").text()&&createModal("tabsModal","Управление вкладками")})}},{key:"deleteGroup",value:function(t){null!=t?$.ajax({url:"".concat(this.url,"?group=").concat(t),method:"delete",dataType:"json",async:!1,success:function(t){createModal("message",t.message),showTable(),TableDB.group.showGroups()},error:function(t){createModal("message",t.responseText)}}):createModal("message","Выберите группу")}},{key:"selectGroup",value:function(){$("#form-select-tab").click(function(t){var a,e,n;0!==activeTab?((e=$("#listGroup .tabsInput")).each(function(t,e){$(e).val()===activeTab&&(a=$(e))}),a?$("#listGroup .tabsInput[value=".concat(activeTab,"]")).attr("selected","selected"):(e[2].remove(),n=$(".table__tab[data-modal-menu-id=".concat(activeTab,"]")),$("#listGroup").append("\n                    <option class='tabsInput' value=\"".concat(activeTab,'" selected>').concat($(n).attr("data-modal-menu-title"),"</option>\n                    "))),closeModal($("#tabsModal")),$(".modal__title").text(TableDB.textAdd),$("#add-modal__submit").text("Создать")):createModal("message","Выберите группу")})}},{key:"createCopiedGroupModal",value:function(t,e){createModal("group-modal","Изменение группы");var a=$(".table__tab[data-modal-menu-id=".concat(e,"]")),n=a.attr("data-modal-menu-title");$("#listGroups").text("").append("\n            <option class='tabsInput' value=\"".concat(e,'">').concat(a.attr("data-modal-menu-title"),"</option>\n        ")),$("#groupName").val(n),TableDB.forms.setFormTypeEditGroup(newForm)}},{key:"showGroup",value:function(){new Promise(function(t){setTimeout(function(){t(1)},1e3)}).then(function(t){var e=$(".main .main__table .table-group .table__tab");e.click(function(t){$("#menu-id-".concat($(this).attr("data-menu-id"))).toggleClass("menu-open"),$(".table[data-table-down-id=".concat($(this).attr("data-menu-id"),"]")).toggleClass("bg-aquamarine")});var a=0;$("#listGroup").text("").append("<option class='tabsInput' value='0' selected>Нет родителя</option>").append("<option class='tabsInput' value='0' id='moreTabs'>Все вкладки</option>"),e.each(function(t,e){a<4&&($("#listGroup").append("<option class='tabsInput' value=\"".concat($(e).attr("data-menu-id"),'">').concat($(e).attr("data-menu-title"),"</option>")),a++)})})}},{key:"showTabsSetting",get:function(){$("#down-menu-tabs .down-menu__list").append('\n            <a class="down-menu__line tabs-button" href="#" id="form-setting-tab">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/folder-setting.png" title="Настройки групп" alt="Настройки групп">\n                </div>\n                <div class="down-menu__text">\n                    Настройки групп\n                </div>\n            </a>\n        ')}},{key:"groupForm",get:function(){$(".main__table").append('\n        <div id="group-modal" class="modal h-250">\n            <p class="modal__title" id="modal__title">Создание вкладки</p>\n            <form action="" method="post" class="modal__form" id="newGroup" data-form-type="add">\n                <label for="groupName" class="modal__label">*Имя вкладки:\n                    <input type="text" name="groupName" id="groupName" class="modal__line">\n                </label>\n                <label for="listGroups" class="modal__label">*Группа:\n                    <select name="listGroups" id="listGroups" class="modal__line">\n                    </select>\n                </label>\n                <div class="modal__action">\n                    <button type="reset" class="modal__btn pd-5" id="add-modal__reset">Очистить</button>\n                    <button type="submit" class="modal__btn pd-5" id="add-modal__submit">Создать</button>\n                </div>\n            </form>\n            <span id="modal__close" class="modal__close">ₓ</span>\n        </div>\n        ')}}],[{key:"tabsModal",value:function(t){var e=$("#tabsModal .table-modal .table__body");function a(t){var e="";return"0"!==t.pid&&(e=void 0===t.pid?"":"pd-size"),'\n                <tr class="table__body__tab" id="modal-tab-'.concat(t.id,'">\n                    <td colspan="3">\n                        <table class="table _services ').concat(e,'" data-modal-table-down-id="').concat(t.id,'" data-modal-table-relative="').concat(t.pid,'">\n\n                            <thead class="table__header table__tab" data-modal-menu-title="').concat(t.title,'" data-modal-menu-id="').concat(t.id,'">\n                                <tr class="table__header__row table__tab__row" id="modal-table-').concat(t.id,'">\n                                    <th class="table__header__col col-tab menu-icon menu-icon-top border-none">\n                                        <img class="img-icon-td" src="img/icon/folder-label.png" alt="">').concat(t.title,'\n                                        \n                                    <div class="table__tabs__action tab-action">\n                                        <label for="tab-action-edit" class="tab-action-item">\n                                            <input type="checkbox" name="tab-edit" id="tab-action-edit" data-tab-check-id="').concat(t.id,'">\n                                        </label>\n                                        <button type="submit" class="tab-action-item tab-action-btn tab-action-edit-btn btn" id="').concat(t.id,'">\n                                            <img src="img/icon/edit.png" title="Изменить группу" alt="Изменить группу">\n                                        </button>\n                                        <button type="submit" class="tab-action-item tab-action-btn tab-action-delete-btn btn" id="').concat(t.id,'">\n                                            <img src="img/icon/folder-delete.png" title="Удалить группу" alt="Удалить группу">\n                                        </button>\n                                    </div>\n                                        \n                                    </th>\n                                </tr>\n                            </thead>\n\n                            <tbody class="table__body table__menu" id="modal-menu-id-').concat(t.id,'"></tbody>\n                        </table>\n                    </td>\n                </tr>')}e.text(""),t.forEach(function(t){"0"!==t.id&&("0"===t.pid?e.append(a(t)):$("#tabsModal #modal-menu-id-".concat(t.pid)).append(a(t)))});var o=$("#tabsModal .table__tab");o.click(function(t){t.stopPropagation();var e,a=$(this).attr("data-modal-menu-id"),n=$("#modal-menu-id-".concat(a));"IMG"!==t.target.tagName&&(n.toggleClass("menu-open"),e=a,o.find("input").prop("checked",!1),$("input[data-tab-check-id=".concat(e,"]")).prop("checked",!0),activeTab=e)})}}]),e}(),ClientReports=function(){_inherits(n,Reports);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e.showReports,e}return _createClass(n,[{key:"showReports",get:function(){$("#down-menu-print .down-menu__list").append('\n            <a class="down-menu__line reports-button" href="#" data-reports-type="clientData">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/profile.png" title="Сформировать информацию об организации" alt="Сформировать информацию об организации">\n                </div>\n                <div class="down-menu__text">\n                    Сформировать информацию об организации\n                </div>\n            </a>\n            <a class="down-menu__line reports-button" href="#" data-reports-type="clientEquipmentData">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/search-list.png" title="Сформировать список оборудования" alt="Сформировать список оборудования">\n                </div>\n                <div class="down-menu__text">\n                    Сформировать список оборудования                \n                </div>\n            </a>\n        ')}}]),n}(),CountriesReports=function(){_inherits(n,Reports);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e.showReports,e}return _createClass(n,[{key:"showReports",get:function(){$("#down-menu-print .down-menu__list").append('\n            <a class="down-menu__line reports-button" href="#" data-reports-type="CountriesData">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/profile.png" title="Сформировать информацию о стране" alt="Сформировать информацию о стране">\n                </div>\n                <div class="down-menu__text">\n                    Вывести информацию о стране\n                </div>\n            </a>\n            <a class="down-menu__line reports-button" href="#" data-reports-type="CountriesEquipmentData">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/search-list.png" title="Сформировать список оборудования в данной стране" alt="Сформировать список оборудования в данной стране">\n                </div>\n                <div class="down-menu__text">\n                    Сформировать список оборудования в данной стране\n                </div>\n            </a>\n        ')}}]),n}(),StaffReports=function(){_inherits(n,Reports);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e.showReports,e}return _createClass(n,[{key:"showReports",get:function(){$("#down-menu-print .down-menu__list").append('\n            <a class="down-menu__line reports-button" href="#" data-reports-type="StaffData">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/profile.png" title="Сформировать информацию об сотруднике" alt="Сформировать информацию об сотруднике">\n                </div>\n                <div class="down-menu__text">\n                    Вывести информацию об сотруднике\n                </div>\n            </a>\n        ')}}]),n}(),JobReports=function(){_inherits(n,Reports);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e.showReports,e}return _createClass(n,[{key:"showReports",get:function(){$("#down-menu-print .down-menu__list").append('\n            <a class="down-menu__line reports-button" href="#" data-reports-type="JobData">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/profile.png" title="Сформировать информацию об должности" alt="Сформировать информацию об должности">\n                </div>\n                <div class="down-menu__text">\n                    Сформировать информацию об должности\n                </div>\n            </a>\n            <a class="down-menu__line reports-button" href="#" data-reports-type="StaffData">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/search-list.png" title="Экспортировать сотрудников с выбранной должностью" alt="Экспортировать сотрудников с выбранной должностью">\n                </div>\n                <div class="down-menu__text">\n                    Экспортировать сотрудников с выбранной должностью\n                </div>\n            </a>\n        ')}}]),n}(),TypeRepairReports=function(){_inherits(n,Reports);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e.showReports,e}return _createClass(n,[{key:"showReports",get:function(){$("#down-menu-print .down-menu__list").append('\n            <a class="down-menu__line reports-button" href="#" data-reports-type="TypeRepairData">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/profile.png" title="Экспортировать тип ремонта" alt="Экспортировать тип ремонта">\n                </div>\n                <div class="down-menu__text">\n                    Экспортировать тип ремонта\n                </div>\n            </a>\n            <a class="down-menu__line reports-button" href="#" data-reports-type="ListTypeRepair">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/search-list.png" title="История вида ремонта" alt="История вида ремонта">\n                </div>\n                <div class="down-menu__text">\n                    История вида ремонта\n                </div>\n            </a>\n        ')}}]),n}(),CategoryReports=function(){_inherits(n,Reports);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e.showReports,e}return _createClass(n,[{key:"showReports",get:function(){$("#down-menu-print .down-menu__list").append('\n            <a class="down-menu__line reports-button" href="#" data-reports-type="categoryData">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/profile.png" title="Экспортировать категорию" alt="Экспортировать категорию">\n                </div>\n                <div class="down-menu__text">\n                    Экспортировать категорию\n                </div>\n            </a>\n            <a class="down-menu__line reports-button" href="#" data-reports-type="categoryEquipmentData">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/search-list.png" title="Экспортировать оборудования с выбранной категорией" alt="Экспортировать оборудования с выбранной категорией">\n                </div>\n                <div class="down-menu__text">\n                    Экспортировать оборудования с выбранной категорией\n                </div>\n            </a>\n        ')}}]),n}(),EquipmentReports=function(){_inherits(n,Reports);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e.showReports,e}return _createClass(n,[{key:"showReports",get:function(){$("#down-menu-print .down-menu__list").append('\n            <a class="down-menu__line reports-button" href="#" data-reports-type="equipmentData">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/profile.png" title="Экспортировать оборудование" alt="Экспортировать оборудование">\n                </div>\n                <div class="down-menu__text">\n                    Экспортировать оборудование\n                </div>\n            </a>\n            <a class="down-menu__line reports-button" href="#" data-reports-type="equipmentRepairsHistoryData">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/search-list.png" title="Экспортировать историю ремонта оборудования" alt="Экспортировать историю ремонта оборудования">\n                </div>\n                <div class="down-menu__text">\n                    Экспортировать историю ремонта оборудования\n                </div>\n            </a>\n        ')}}]),n}(),BrandReports=function(){_inherits(n,Reports);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e.showReports,e}return _createClass(n,[{key:"showReports",get:function(){$("#down-menu-print .down-menu__list").append('\n            <a class="down-menu__line reports-button" href="#" data-reports-type="brandData">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/profile.png" title="Экспортировать модель" alt="Экспортировать модель">\n                </div>\n                <div class="down-menu__text">\n                    Экспортировать модель\n                </div>\n            </a>\n            <a class="down-menu__line reports-button" href="#" data-reports-type="brandEquipmentData">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/search-list.png" title="Экспортировать оборудования с выбранной моделью" alt="Экспортировать оборудования с выбранной моделью">\n                </div>\n                <div class="down-menu__text">\n                    Экспортировать оборудования с выбранной моделью\n                </div>\n            </a>\n        ')}}]),n}(),RepairsReports=function(){_inherits(n,Reports);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e.showReports,e}return _createClass(n,[{key:"showReports",get:function(){$("#down-menu-print .down-menu__list").append('\n            <a class="down-menu__line reports-button" href="#" data-reports-type="repairsData">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/profile.png" title="Сформировать отчет" alt="Сформировать отчет">\n                </div>\n                <div class="down-menu__text">\n                    Сформировать отчет\n                </div>\n            </a>\n            <a class="down-menu__line reports-button" href="#" id="shipment-btn">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/delivery.png" title="Сформировать акт отгрузки" alt="Сформировать акт отгрузки">\n                </div>\n                <div class="down-menu__text">Сформировать акт отгрузки</div>\n            </a>\n        ')}}]),n}(),ShipmentReports=function(){_inherits(n,Reports);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e.showReports,e}return _createClass(n,[{key:"showReports",get:function(){$("#down-menu-print .down-menu__list").append('\n            <a class="down-menu__line reports-button" href="#" data-reports-type="ShipmentData">\n                <div class="down-menu__icon btn pd-5">\n                    <img src="img/icon/profile.png" title="Экспортировать акт ремонта" alt="Экспортировать акт ремонта">\n                </div>\n                <div class="down-menu__text">\n                    Экспортировать акт ремонта\n                </div>\n            </a>\n        ')}}]),n}(),JobTitleModal=function(){function e(){_classCallCheck(this,e),this.url="/api/job.php",this.data,this.openModal()}return _createClass(e,[{key:"openModal",value:function(){$('select[data-search-list="JobTitle"]').change(function(){"0"===$(this).val()&&createModal("jobModal","Выбор должности")})}},{key:"data",get:function(){$.ajax({url:"".concat(this.url),method:"get",dataType:"json",async:!1,success:function(t){e.tabsModal(t)}})}}],[{key:"select",value:function(){$("#form-job-select-tab").click(function(t){var a,e,n;t.preventDefault(),0!==activeSpecialization?((e=$('select[data-search-list="JobTitle"] .tabsInput')).each(function(t,e){$(e).val()===activeSpecialization&&(a=$(e))}),a?$('select[data-search-list="JobTitle"] .tabsInput[value='.concat(activeSpecialization,"]")).attr("selected","selected"):(e[e.length-1].remove(),n=$("#jobModal .table__body #".concat(activeSpecialization)),$('select[data-search-list="JobTitle"]').append("\n                        <option class='tabsInput' value=\"".concat(activeSpecialization,'" selected>').concat($(n).attr("data-menu-title"),"</option>\n                    "))),closeModal($("#jobModal")),$(".modal__title").text(TableDB.textAdd),$("#add-modal__submit").text("Создать")):createModal("message","Выберите запись для вставки")})}},{key:"tabsModal",value:function(t){var a=$("#jobModal .table-modal .table__body");a.text(""),t.forEach(function(t){return a.append('\n                <tr class="table__body__row modal-row" id="'.concat((e=t).id,'" data-menu-title="').concat(e.name,'">\n                    <td class="table__body__col" data-id="id">\n                        <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(e.id,'\n                    </td>\n                    <td class="table__body__col" data-id="name">').concat(e.name,"</td>\n                </tr>"));var e}),$("#jobModal .table__body__row").click(function(t){t.stopPropagation(),$("#jobModal .table__body__row").removeClass("_marked"),$(this).addClass("_marked"),activeSpecialization=$(this).attr("id")}),this.select(),this.showContent()}},{key:"showContent",value:function(){new Promise(function(t){setTimeout(function(){t(1)},1e3)}).then(function(t){var e=$("#jobModal .table__body .table__body__row"),a=$('select[data-search-list="JobTitle"]'),n=0;a.text("").append("<option class='tabsInput' value='0' disabled selected>Выберите должность</option>").append("<option class='tabsInput' value='0' id='moreTabs'>Все должности</option>"),e.each(function(t,e){n<4&&(a.append("<option class='tabsInput' value=\"".concat($(e).attr("id"),'">').concat($(e).attr("data-menu-title"),"</option>")),n++)})})}}]),e}(),BrandModal=function(){function e(){_classCallCheck(this,e),this.url="/api/brand.php",this.BDKey="brand",this.modalName="brandModal",this.labelName="idBrand",this.data,this.openModal()}return _createClass(e,[{key:"openModal",value:function(){$("select[data-search-list='Brand']").change(function(){"0"===$(this).val()&&createModal("brandModal","Выберите бренд")})}},{key:"data",get:function(){$.ajax({url:"".concat(this.url),method:"get",dataType:"json",async:!1,success:function(t){e.tabsModal(t)}})}}],[{key:"select",value:function(){$("#form-brand-select-tab").click(function(t){var a,e,n;t.preventDefault(),0!==activeBrand?((e=$("select[data-search-list='Brand'] .tabsInput")).each(function(t,e){$(e).val()===activeBrand&&(a=$(e))}),a?$("select[data-search-list='Brand'] .tabsInput[value=".concat(activeBrand,"]")).attr("selected","selected"):(e[e.length-1].remove(),n=$("#".concat(TableDB.brand.modalName," .table__body #").concat(activeBrand)),$("select[data-search-list='Brand']").append("\n                        <option class='tabsInput' value=\"".concat(activeBrand,'" selected>').concat($(n).attr("data-menu-title"),"</option>\n                    "))),closeModal($("#".concat(TableDB.brand.modalName))),$(".modal__title").text(TableDB.textAdd),$("#add-modal__submit").text("Создать")):createModal("message","Выберите запись для вставки")})}},{key:"tabsModal",value:function(t){var a=$("#brandModal .table-modal .table__body");a.text(""),t.forEach(function(t){return a.append('\n                <tr class="table__body__row modal-row" id="'.concat((e=t).id,'" data-menu-title="').concat(e.name,'">\n                    <td class="table__body__col" data-id="id">\n                        <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(e.id,'\n                    </td>\n                    <td class="table__body__col" data-id="name">').concat(e.name,"</td>\n                </tr>"));var e}),$("#brandModal .table__body__row").click(function(t){t.stopPropagation(),$("#brandModal .table__body__row").removeClass("_marked"),$(this).addClass("_marked"),activeBrand=$(this).attr("id")}),this.select(),this.showContent()}},{key:"showContent",value:function(){new Promise(function(t){setTimeout(function(){t(1)},1e3)}).then(function(t){var e=$("#brandModal .table__body .table__body__row"),a=$("select[data-search-list='Brand']"),n=0;a.text("").append("<option class='tabsInput' value='0' disabled selected>Выберите бренд</option>").append("<option class='tabsInput' value='0' id='moreTabs'>Все бренды</option>"),e.each(function(t,e){n<4&&(a.append("<option class='tabsInput' value=\"".concat($(e).attr("id"),'">').concat($(e).attr("data-menu-title"),"</option>")),n++)})})}}]),e}(),CountryModal=function(){function e(){_classCallCheck(this,e),this.url="/api/countries.php",this.BDKey="country",this.modalName="countryModal",this.labelName="idCountry",this.data,this.openModal()}return _createClass(e,[{key:"openModal",value:function(){$("select[data-search-list='Country']").change(function(){"0"===$(this).val()&&createModal("countryModal","Выберите страну")})}},{key:"data",get:function(){$.ajax({url:"".concat(this.url),method:"get",dataType:"json",async:!1,success:function(t){e.tabsModal(t)}})}}],[{key:"select",value:function(){$("#form-country-select-tab").click(function(t){var a,e,n;t.preventDefault(),0!==activeCountry?((e=$("select[data-search-list='Country'] .tabsInput")).each(function(t,e){$(e).val()===activeCountry&&(a=$(e))}),a?$("select[data-search-list='Country'] .tabsInput[value=".concat(activeCountry,"]")).attr("selected","selected"):(e[e.length-1].remove(),n=$("#".concat(TableDB.country.modalName," .table__body #").concat(activeCountry)),$("select[data-search-list='Country']").append("\n                        <option class='tabsInput' value=\"".concat(activeCountry,'" selected>').concat($(n).attr("data-menu-title"),"</option>\n                    "))),closeModal($("#".concat(TableDB.country.modalName))),$(".modal__title").text(TableDB.textAdd),$("#add-modal__submit").text("Создать")):createModal("message","Выберите запись для вставки")})}},{key:"tabsModal",value:function(t){var a=$("#countryModal .table-modal .table__body");a.text(""),t.forEach(function(t){return a.append('\n                <tr class="table__body__row modal-row" id="'.concat((e=t).id,'" data-menu-title="').concat(e.name,'">\n                    <td class="table__body__col" data-id="id">\n                        <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(e.id,'\n                    </td>\n                    <td class="table__body__col" data-id="name">').concat(e.name,"</td>\n                </tr>"));var e}),$("#countryModal .table__body__row").click(function(t){t.stopPropagation(),$("#countryModal .table__body__row").removeClass("_marked"),$(this).addClass("_marked"),activeCountry=$(this).attr("id")}),this.select(),this.showContent()}},{key:"showContent",value:function(){new Promise(function(t){setTimeout(function(){t(1)},1e3)}).then(function(t){var e=$("#countryModal .table__body .table__body__row"),a=$("select[data-search-list='Country']"),n=0;a.text("").append("<option class='tabsInput' value='0' disabled selected>Выберите страну</option>").append("<option class='tabsInput' value='0' id='moreTabs'>Все страны</option>"),e.each(function(t,e){n<4&&(a.append("<option class='tabsInput' value=\"".concat($(e).attr("id"),'">').concat($(e).attr("data-menu-title"),"</option>")),n++)})})}}]),e}(),CategoryModal=function(){function e(){_classCallCheck(this,e),this.url="/api/category.php",this.BDKey="category",this.modalName="categoryModal",this.labelName="select[data-search-list='Category']",this.data,this.openModal()}return _createClass(e,[{key:"openModal",value:function(){$("select[data-search-list='Category']").change(function(){"0"===$(this).val()&&createModal("categoryModal","Выбор категории")})}},{key:"data",get:function(){$.ajax({url:"".concat(this.url),method:"get",dataType:"json",async:!1,success:function(t){e.tabsModal(t)}})}}],[{key:"select",value:function(){$("#form-category-select-tab").click(function(t){var a,e,n;t.preventDefault(),0!==activeCategory?((e=$("select[data-search-list='Category'] .tabsInput")).each(function(t,e){$(e).val()===activeCategory&&(a=$(e))}),a?$("select[data-search-list='Category'] .tabsInput[value=".concat(activeCategory,"]")).attr("selected","selected"):(e[e.length-1].remove(),n=$("#".concat(TableDB.category.modalName," .table__body #").concat(activeCategory)),$("select[data-search-list='Category']").append("\n                        <option class='tabsInput' value=\"".concat(activeCategory,'" selected>').concat($(n).attr("data-menu-title"),"</option>\n                    "))),closeModal($("#".concat(TableDB.category.modalName))),$(".modal__title").text(TableDB.textAdd),$("#add-modal__submit").text("Создать")):createModal("message","Выберите запись для вставки")})}},{key:"tabsModal",value:function(t){var e=$("#categoryModal .table-modal .table__body");e.text(""),t.forEach(function(t){return e.append(function(t){if(t.tab)return'\n                <tr class="table__body__row modal-row" id="'.concat(t.id,'" data-menu-title="').concat(t.name,'">\n                    <td class="table__body__col" data-id="id">\n                        <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(t.id,'\n                    </td>\n                    <td class="table__body__col" data-id="name">').concat(t.name,"</td>\n                </tr>")}(t))}),$("#categoryModal .table__body__row").click(function(t){t.stopPropagation(),$("#categoryModal .table__body__row").removeClass("_marked"),$(this).addClass("_marked"),activeCategory=$(this).attr("id")}),this.select(),this.showContent()}},{key:"showContent",value:function(){new Promise(function(t){setTimeout(function(){t(1)},1e3)}).then(function(t){var e=$("#".concat(TableDB.category.modalName," .table__body .table__body__row")),a=$("select[data-search-list='Category']"),n=0;a.text("").append("<option class='tabsInput' value='0' disabled selected>Выберите категорию</option>").append("<option class='tabsInput' value='0' id='moreTabs'>Все категории</option>"),e.each(function(t,e){n<4&&(a.append("<option class='tabsInput' value=\"".concat($(e).attr("id"),'">').concat($(e).attr("data-menu-title"),"</option>")),n++)})})}}]),e}(),ClientModal=function(){function e(){_classCallCheck(this,e),this.url="/api/client.php",this.data,this.openModal()}return _createClass(e,[{key:"openModal",value:function(){$('select[data-search-list="Client"]').change(function(){"0"===$(this).val()?createModal("clientModal","Выбор клиента"):TableDB.equipment.equipmentClient($(this).val())})}},{key:"data",get:function(){$.ajax({url:"".concat(this.url),method:"get",dataType:"json",async:!1,success:function(t){e.tabsModal(t)}})}}],[{key:"select",value:function(){$("#form-client-select-tab").click(function(t){var a,e,n;t.preventDefault(),0!==activeClient?((e=$('select[data-search-list="Client"] .tabsInput')).each(function(t,e){$(e).val()===activeClient&&(a=$(e))}),a?$('select[data-search-list="Client"] .tabsInput[value='.concat(activeClient,"]")).attr("selected","selected"):(e[e.length-1].remove(),n=$("#clientModal .table__body #".concat(activeClient)),$('select[data-search-list="Client"]').append("\n                        <option class='tabsInput' value=\"".concat(activeClient,'" selected>').concat($(n).attr("data-menu-title"),"</option>\n                    "))),closeModal($("#clientModal")),$(".modal__title").text(TableDB.textAdd),$("#add-modal__submit").text("Создать"),TableDB.equipment.equipmentClient(activeClient)):createModal("message","Выберите запись для вставки")})}},{key:"tabsModal",value:function(t){var a=$("#clientModal .table-modal .table__body");a.text(""),t.forEach(function(t){return a.append('\n                <tr class="table__body__row modal-row" id="'.concat((e=t).id,'" data-menu-title="').concat(e.name,'">\n                    <td class="table__body__col" data-id="id">\n                        <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(e.id,'\n                    </td>\n                    <td class="table__body__col" data-id="name">').concat(e.name,"</td>\n                </tr>"));var e}),$("#clientModal .table__body__row").click(function(t){t.stopPropagation(),$("#clientModal .table__body__row").removeClass("_marked"),$(this).addClass("_marked"),activeClient=$(this).attr("id")}),this.select(),this.showContent()}},{key:"showContent",value:function(){new Promise(function(t){setTimeout(function(){t(1)},1e3)}).then(function(t){var e=$("#clientModal .table__body .table__body__row"),a=$('select[data-search-list="Client"]'),n=0;a.text("").append("<option class='tabsInput' value='0' disabled selected>Выберите клиента</option>").append("<option class='tabsInput' value='0' id='moreTabs'>Все клиенты</option>"),e.each(function(t,e){n<4&&(a.append("<option class='tabsInput' value=\"".concat($(e).attr("id"),'">').concat($(e).attr("data-menu-title"),"</option>")),n++)})})}}]),e}(),StaffModal=function(){function e(){_classCallCheck(this,e),this.url="/api/staff.php",this.data,this.openModal()}return _createClass(e,[{key:"openModal",value:function(){$("select[data-search-list='Staff']").change(function(){"0"===$(this).val()&&createModal("staffModal","Выбор специалиста")})}},{key:"data",get:function(){$.ajax({url:"".concat(this.url),method:"get",dataType:"json",async:!1,success:function(t){e.tabsModal(t)}})}}],[{key:"select",value:function(){$("#form-staff-select-tab").click(function(t){var a,e,n;t.preventDefault(),0!==activeStaff?((e=$("select[data-search-list='Staff'] .tabsInput")).each(function(t,e){$(e).val()===activeStaff&&(a=$(e))}),a?$("select[data-search-list='Staff'] .tabsInput[value=".concat(activeStaff,"]")).attr("selected","selected"):(e[e.length-1].remove(),n=$("#staffModal .table__body #".concat(activeStaff)),$("select[data-search-list='Staff']").append("\n                        <option class='tabsInput' value=\"".concat(activeStaff,'" selected>').concat($(n).attr("data-menu-title"),"</option>\n                    "))),closeModal($("#staffModal")),$(".modal__title").text(TableDB.textAdd),$("#add-modal__submit").text("Создать")):createModal("message","Выберите запись для вставки")})}},{key:"tabsModal",value:function(t){var a=$("#staffModal .table-modal .table__body");a.text(""),t.forEach(function(t){return a.append('\n                <tr class="table__body__row modal-row" id="'.concat((e=t).id,'" data-menu-title="').concat(e.fullName,'">\n                    <td class="table__body__col" data-id="id">\n                        <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(e.id,'\n                    </td>\n                    <td class="table__body__col" data-id="name">').concat(e.fullName,'</td>\n                    <td class="table__body__col" data-id="name">').concat(e.JobTitleName,"</td>\n                </tr>"));var e}),$("#staffModal .table__body__row").click(function(t){t.stopPropagation(),$("#staffModal .table__body__row").removeClass("_marked"),$(this).addClass("_marked"),activeStaff=$(this).attr("id")}),this.select(),this.showContent()}},{key:"showContent",value:function(){new Promise(function(t){setTimeout(function(){t(1)},1e3)}).then(function(t){var e=$("#staffModal .table__body .table__body__row"),a=$("select[data-search-list='Staff']"),n=0;a.text("").append("<option class='tabsInput' value='0' disabled selected>Выберите специалиста</option>").append("<option class='tabsInput' value='0' id='moreTabs'>Все специалисты</option>"),e.each(function(t,e){n<4&&(a.append("<option class='tabsInput' value=\"".concat($(e).attr("id"),'">').concat($(e).attr("data-menu-title"),"</option>")),n++)})})}}]),e}(),TypeRepairModal=function(){function e(){_classCallCheck(this,e),this.url="/api/typeRepair.php",this.data,this.openModal()}return _createClass(e,[{key:"openModal",value:function(){$("select[data-search-list='TypeRepair']").change(function(){"0"===$(this).val()?createModal("typeRepairModal","Выбор типа ремонта"):$("#price").val($("#typeRepair_id option[value=".concat($(this).val(),"]")).attr("data-price"))})}},{key:"data",get:function(){$.ajax({url:"".concat(this.url),method:"get",dataType:"json",async:!1,success:function(t){e.tabsModal(t)}})}}],[{key:"select",value:function(){$("#form-typeRepair-select-tab").click(function(t){var a,e,n;t.preventDefault(),0!==activeTypeRepair?((e=$("select[data-search-list='TypeRepair'] .tabsInput")).each(function(t,e){$(e).val()===activeTypeRepair&&(a=$(e))}),a?$("select[data-search-list='TypeRepair'] .tabsInput[value=".concat(activeTypeRepair,"]")).attr("selected","selected"):(e[e.length-1].remove(),n=$("#typeRepairModal .table__body #".concat(activeTypeRepair)),$("select[data-search-list='TypeRepair']").append("\n                        <option class='tabsInput' value=\"".concat(activeTypeRepair,'" selected>').concat($(n).attr("data-menu-title"),"</option>\n                    "))),closeModal($("#typeRepairModal")),$("#price").val($("#typeRepairModal #".concat(activeTypeRepair)).attr("data-price")),$(".modal__title").text(TableDB.textAdd),$("#add-modal__submit").text("Создать")):createModal("message","Выберите запись для вставки")})}},{key:"tabsModal",value:function(t){var e=$("#typeRepairModal .table-modal .table__body");e.text(""),t.forEach(function(t){return e.append(function(t){if(t.id)return'\n                <tr class="table__body__row modal-row" id="'.concat(t.id,'" data-menu-title="').concat(t.name,'" data-price="').concat(t.price,'">\n                    <td class="table__body__col" data-id="id">\n                        <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(t.id,'\n                    </td>\n                    <td class="table__body__col" data-id="name">').concat(t.name,"</td>\n                </tr>")}(t))}),$("#typeRepairModal .table__body__row").click(function(t){t.stopPropagation(),$("#typeRepairModal .table__body__row").removeClass("_marked"),$(this).addClass("_marked"),activeTypeRepair=$(this).attr("id")}),this.select(),this.showContent()}},{key:"showContent",value:function(){new Promise(function(t){setTimeout(function(){t(1)},1e3)}).then(function(t){var e=$("#typeRepairModal .table__body .table__body__row"),a=$("select[data-search-list='TypeRepair']"),n=0;a.text("").append("<option class='tabsInput' value='0' disabled selected>Выберите тип ремонта</option>").append("<option class='tabsInput' value='0' id='moreTabs'>Все типы ремонта</option>"),e.each(function(t,e){n<4&&(a.append("<option class='tabsInput' value=\"".concat($(e).attr("id"),'" data-price="').concat($(e).attr("data-price"),'">').concat($(e).attr("data-menu-title"),"</option>")),n++)})})}}]),e}(),EquipmentModal=function(){function e(){_classCallCheck(this,e),this.url="/api/equipment.php",this.data,this.openModal()}return _createClass(e,[{key:"equipmentClient",value:function(t){$.ajax({url:"".concat(this.url,"?client.id = ").concat(t),method:"get",dataType:"json",async:!1,success:function(t){e.tabsModal(t)}})}},{key:"openModal",value:function(){$("select[data-search-list='Equipment']").change(function(){"0"===$(this).val()&&createModal("equipmentModal","Выбор оборудования")})}},{key:"data",get:function(){$.ajax({url:"".concat(this.url),method:"get",dataType:"json",async:!1,success:function(t){e.tabsModal(t)}})}}],[{key:"select",value:function(){$("#form-equipment-select-tab").click(function(t){var a,e,n;t.preventDefault(),0!==activeEquipment?((e=$("select[data-search-list='Equipment'] .tabsInput")).each(function(t,e){$(e).val()===activeEquipment&&(a=$(e))}),a?$("select[data-search-list='Equipment'] .tabsInput[value=".concat(activeEquipment,"]")).attr("selected","selected"):(e[e.length-1].remove(),n=$("#equipmentModal .table__body #".concat(activeEquipment)),$("select[data-search-list='Equipment']").append("\n                        <option class='tabsInput' value=\"".concat(activeEquipment,'" selected>').concat($(n).attr("data-menu-title"),"</option>\n                    "))),closeModal($("#equipmentModal")),$(".modal__title").text(TableDB.textAdd),$("#add-modal__submit").text("Создать")):createModal("message","Выберите запись для вставки")})}},{key:"tabsModal",value:function(t){var e=$("#equipmentModal .table-modal .table__body");e.text(""),t.forEach(function(t){return e.append(function(t){if(t.id)return'\n                <tr class="table__body__row modal-row" id="'.concat(t.id,'" data-menu-title="').concat(t.name,'">\n                    <td class="table__body__col" data-id="id">\n                        <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(t.id,'\n                    </td>\n                    <td class="table__body__col" data-id="name">').concat(t.name,"</td>\n                </tr>")}(t))}),$("#equipmentModal .table__body__row").click(function(t){t.stopPropagation(),$("#equipmentModal .table__body__row").removeClass("_marked"),$(this).addClass("_marked"),activeEquipment=$(this).attr("id")}),this.select(),this.showContent()}},{key:"showContent",value:function(){new Promise(function(t){setTimeout(function(){t(1)},1e3)}).then(function(t){var e=$("#equipmentModal .table__body .table__body__row"),a=$("select[data-search-list='Equipment']"),n=0;a.text("").append("<option class='tabsInput' value='0' disabled selected>Выберите оборудование</option>").append("<option class='tabsInput' value='0' id='moreTabs'>Все оборудование</option>"),e.each(function(t,e){n<4&&(a.append("<option class='tabsInput' value=\"".concat($(e).attr("id"),'">').concat($(e).attr("data-menu-title"),"</option>")),n++)})})}}]),e}(),ClientForm=function(){_inherits(n,Forms);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e}return _createClass(n,[{key:"showTable",value:function(t){var e=$(".table-client .table__body");e.text(""),t.forEach(function(t){e.append('                    \n                    <tr class="table__body__row" id="'.concat(t.id,'" data-equipment-list-id="').concat(t.equipmentList,'">\n                        <td class="table__body__col" data-id="id">\n                            <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(t.id,'\n                        </td>\n                        <td class="table__body__col" data-id="name">').concat(t.name,'</td>\n                        <td class="table__body__col" data-id="address">').concat(t.address,"</td>\n                    </tr>"))})}},{key:"formLabel",value:function(){return'<label for="name" class="modal__label">*Название организации:\n                    <input type="text" name="name" id="name" class="modal__line">\n                </label>\n                <label for="address" class="modal__label">*Адрес организации:\n                    <input type="text" name="address" id="address" class="modal__line">\n                </label>'}},{key:"newRecordsForm",value:function(){mainTable.append('\n        <div id="modal" class="modal h-300">\n            <p class="modal__title" id="modal__title" data-modal-title="patient">Создание организации</p>    \n            <form action="" method="post" class="modal__form" id="newForm" data-form-type="add">\n                    '.concat(this.formLabel(),'\n                    \n                    <div class="modal__body h-150">\n                        <table class="table table-client-equipment-modal">\n            \n                            <thead class="table__header bg-grey">\n                                <tr class="table__header__row">\n                                    <th class="table__header__col">Код оборудования</th>\n                                    <th class="table__header__col">Название оборудования</th>\n                                    <th class="table__header__col">Год выпуска</th>\n                                    <th class="table__header__col">Производитель</th>\n                                    <th class="table__header__col">Модель оборудования</th>\n                                    <th class="table__header__col">Категория оборудования</th>\n                                </tr>\n                            </thead>\n            \n                            <tbody class="table__body">\n                            </tbody>\n    \n                        </table>\n                </div>\n                    \n                <div class="modal__action">\n                    <button type="reset" class="modal__btn pd-5" id="add-modal__reset">Очистить</button>\n                    <button type="submit" class="modal__btn pd-5" id="add-modal__submit">Создать</button>\n                </div>\n             </form>\n            <span id="modal__close" class="modal__close">ₓ</span>\n        </div>'))}},{key:"createCopiedModal",value:function(n){0<$("._marked").length?(createModal(n,"Редактирование записи"),TableDB.forms.setFormTypeEdit(newForm),$("._marked .table__body__col").each(function(t,e){var a=$(e).attr("data-id");$("#".concat(n," #").concat(a)).val(e.innerHTML)}),TableDB.equipments(activeRow)):createModal("message","Выберите запись")}},{key:"uploadForms",value:function(){this.newRecordsForm(),this.reportsForm(),this.errorForm(),this.extendedSearchForm()}},{key:"modalSubmit",value:function(){TableDB.forms.submitLogic(newForm)}}]),n}(),CountriesForm=function(){_inherits(n,Forms);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e}return _createClass(n,[{key:"showTable",value:function(t){var e=$(".table__body");e.text(""),t.forEach(function(t){e.append('                    \n                    <tr class="table__body__row" id="'.concat(t.id,'">\n                        <td class="table__body__col" data-id="id">\n                            <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(t.id,'\n                        </td>\n                        <td class="table__body__col" data-id="name">').concat(t.name,"</td>\n                    </tr>"))})}},{key:"formLabel",value:function(){return'<label for="name" class="modal__label modal__label-full">*Наименование страны:\n                    <input type="text" name="name" id="name" pattern="^[А-Яа-яЁё\\s]+$" class="modal__line">\n                </label>'}},{key:"newRecordsForm",value:function(){mainTable.append('\n        <div id="modal" class="modal h-200">\n            <p class="modal__title" id="modal__title" data-modal-title="patient">Создание квалификации</p>    \n            <form action="" method="post" class="modal__form" id="newForm" data-form-type="add">\n                    '.concat(this.formLabel(),'\n                <div class="modal__action">\n                    <button type="reset" class="modal__btn pd-5" id="add-modal__reset">Очистить</button>\n                    <button type="submit" class="modal__btn pd-5" id="add-modal__submit">Создать</button>\n                </div>\n             </form>\n            <span id="modal__close" class="modal__close">ₓ</span>\n        </div>'))}},{key:"uploadForms",value:function(){this.newRecordsForm(),this.reportsForm(),this.errorForm(),this.extendedSearchForm()}},{key:"modalSubmit",value:function(){TableDB.forms.submitLogic(newForm)}}]),n}(),StaffForm=function(){_inherits(n,Forms);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e}return _createClass(n,[{key:"showTable",value:function(t){var e=$(".table-staff .table__body");e.text(""),t.forEach(function(t){e.append('                    \n                    <tr class="table__body__row" id="'.concat(t.id,'">\n                        <td class="table__body__col" data-id="id">\n                            <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(t.id,'\n                        </td>\n                        <td class="table__body__col" data-id="fullName">').concat(t.fullName,'</td>\n                        <td class="table__body__col" data-id="JobTitleId" data-jobTitle-id="').concat(t.JobTitleId,'">').concat(t.JobTitleName,'</td>\n                        <td class="table__body__col" data-id="tel">').concat(t.tel,"</td>\n                    </tr>"))})}},{key:"formLabel",value:function(){return'<label for="fullName" class="modal__label">*ФИО сотрудника:\n                    <input type="text" name="fullName" id="fullName" class="modal__line">\n                </label>\n                <label for="JobTitleId" class="modal__label">*Должность:\n                    <select name="JobTitleId" id="JobTitleId" data-search-list="JobTitle" class="modal__line"></select>\n                </label>\n                <label for="tel" class="modal__label">*Телефон:\n                    <input type="tel" name="tel" placeholder="79995552525" id="tel" minlength="11" maxlength="11" class="modal__line">\n                </label>'}},{key:"createCopiedModal",value:function(n){0<$("._marked").length?(createModal(n),TableDB.forms.setFormTypeEdit(newForm),$("._marked .table__body__col").each(function(t,e){var a=$(e).attr("data-id");$("#".concat(n," #").concat(a)).val(e.innerHTML),$('#JobTitleId .tabsInput[value="'.concat($(e).attr("data-jobtitle-id"),'"]')).prop("selected",!0)})):createModal("message","Выберите запись")}},{key:"uploadForms",value:function(){this.newRecordsForm(),this.reportsForm(),this.errorForm(),this.extendedSearchForm()}},{key:"modalSubmit",value:function(){TableDB.forms.submitLogic(newForm)}}]),n}(),JobForm=function(){_inherits(n,Forms);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e}return _createClass(n,[{key:"showTable",value:function(t){var e=$(".table__body");e.text(""),t.forEach(function(t){e.append('                    \n                    <tr class="table__body__row" id="'.concat(t.id,'">\n                        <td class="table__body__col" data-id="id">\n                            <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(t.id,'\n                        </td>\n                        <td class="table__body__col" data-id="name">').concat(t.name,'</td>\n                        <td class="table__body__col" data-id="salary">').concat(t.salary,"</td>\n                    </tr>"))})}},{key:"formLabel",value:function(){return'<label for="name" class="modal__label">*Название должности:\n                    <input type="text" name="name" id="name" class="modal__line">\n                </label>\n                <label for="salary" class="modal__label">*Зарплата:\n                    <input type="number" name="salary" id="salary" class="modal__line">\n                </label>'}},{key:"newRecordsForm",value:function(){mainTable.append('\n        <div id="modal" class="modal h-200">\n            <p class="modal__title" id="modal__title" data-modal-title="patient">Создание должности</p>    \n            <form action="" method="post" class="modal__form" id="newForm" data-form-type="add">\n                    '.concat(this.formLabel(),'\n                <div class="modal__action">\n                    <button type="reset" class="modal__btn pd-5" id="add-modal__reset">Очистить</button>\n                    <button type="submit" class="modal__btn pd-5" id="add-modal__submit">Создать</button>\n                </div>\n             </form>\n            <span id="modal__close" class="modal__close">ₓ</span>\n        </div>'))}},{key:"uploadForms",value:function(){this.newRecordsForm(),this.reportsForm(),this.errorForm(),this.extendedSearchForm()}},{key:"modalSubmit",value:function(){TableDB.forms.submitLogic(newForm)}}]),n}(),TypeRepairForm=function(){_inherits(n,Forms);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e}return _createClass(n,[{key:"showTable",value:function(t){function e(t){return null===t.id?"":'<tr class="table__body__row" id="'.concat(t.id,'" data-service-list-id="').concat(t.tab,'">\n                        <td class="table__body__col" data-id="id">\n                            <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(t.id,'\n                           </td>\n                        <td class="table__body__col" data-id="name">').concat(t.name,'</td>\n                        <td class="table__body__col" data-id="price">').concat(t.price,"</td>\n                    </tr>")}function a(t){var e,a="";return"0"!==t.pid&&(a=void 0===(e=t.pid)||"0"===e?"":"pd-size"),'<tr class="table__body__tab" id="tab-'.concat(t.tabsId,'">\n                    <td colspan="3">\n                        <table class="table _services ').concat(a,'" data-table-down-id="').concat(t.tabsId,'" data-table-relative="').concat(t.pid,'">\n\n                            <thead class="table__header table__tab" data-menu-title="').concat(t.title,'" data-menu-id="').concat(t.tabsId,'">\n                                <tr class="table__header__row" id="table-').concat(t.tabsId,'">\n                                    <th class="table__header__col col-tab menu-icon menu-icon-top" colspan="3">\n                                        <img class="img-icon-td" src="img/icon/folder-label.png" alt="">').concat(t.title,'\n                                    </th>\n                                </tr>\n                            </thead>\n\n                            <tbody class="table__body table__menu" id="menu-id-').concat(t.tabsId,'"></tbody>\n                        </table>\n                    </td>')}var n=$(".table-typeRepair .table__body");n.text(""),t.forEach(function(t){"0"!==t.tab?$("#tab-".concat(t.tab)).length?$(e(t)).prependTo($("#menu-id-".concat(t.tab))):"0"===t.pid?n.append(a(t)):$(a(t)).prependTo($("#menu-id-".concat(t.pid))):n.append(e(t))}),TableDB.group.showGroup()}},{key:"formLabel",value:function(){return'<label for="name" class="modal__label">*Вид ремонта:\n                    <input type="text" name="name" id="name" class="modal__line">\n                </label>\n                <label for="price" class="modal__label">*Цена:\n                    <input type="number" name="price" id="price" class="modal__line">\n                </label>\n                <label for="listGroup" class="modal__label">*Группа:\n                    <select name="listGroup" id="listGroup" class="modal__line">\n                    </select>\n                </label>'}},{key:"uploadForms",value:function(){this.newRecordsForm(),this.reportsForm(),this.errorForm(),this.extendedSearchForm()}},{key:"modalSubmit",value:function(){TableDB.forms.submitLogic(newForm),TableDB.forms.submitLogic(newGroup)}}]),n}(),CategoryForm=function(){_inherits(n,Forms);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e}return _createClass(n,[{key:"showTable",value:function(t){function e(t){return null===t.id?"":'<tr class="table__body__row" id="'.concat(t.id,'" data-service-list-id="').concat(t.tab,'">\n                        <td class="table__body__col" data-id="id">\n                            <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(t.id,'\n                           </td>\n                        <td class="table__body__col" data-id="name">').concat(t.name,"</td>\n                    </tr>")}function a(t){var e,a="";return"0"!==t.pid&&(a=void 0===(e=t.pid)||"0"===e?"":"pd-size"),'<tr class="table__body__tab" id="tab-'.concat(t.tabsId,'">\n                    <td colspan="2">\n                        <table class="table _services ').concat(a,'" data-table-down-id="').concat(t.tabsId,'" data-table-relative="').concat(t.pid,'">\n\n                            <thead class="table__header table__tab" data-menu-title="').concat(t.title,'" data-menu-id="').concat(t.tabsId,'">\n                                <tr class="table__header__row" id="table-').concat(t.tabsId,'">\n                                    <th class="table__header__col col-tab menu-icon menu-icon-top" colspan="2">\n                                        <img class="img-icon-td" src="img/icon/folder-label.png" alt="">').concat(t.title,'\n                                    </th>\n                                </tr>\n                            </thead>\n\n                            <tbody class="table__body table__menu" id="menu-id-').concat(t.tabsId,'"></tbody>\n                        </table>\n                    </td>')}var n=$(".table-category .table__body");n.text(""),t.forEach(function(t){"0"!==t.tab?$("#tab-".concat(t.tab)).length?$(e(t)).prependTo($("#menu-id-".concat(t.tab))):"0"===t.pid?n.append(a(t)):$(a(t)).prependTo($("#menu-id-".concat(t.pid))):n.append(e(t))}),TableDB.group.showGroup()}},{key:"formLabel",value:function(){return'<label for="name" class="modal__label">*Название категории:\n                    <input type="text" name="name" id="name" class="modal__line">\n                </label>\n                <label for="listGroup" class="modal__label">*Группа:\n                    <select name="listGroup" id="listGroup" class="modal__line">\n                    </select>\n                </label>'}},{key:"newRecordsForm",value:function(){mainTable.append('\n        <div id="modal" class="modal h-200">\n            <p class="modal__title" id="modal__title" data-modal-title="patient">Создание категории оборудования</p>    \n            <form action="" method="post" class="modal__form table-service" id="newForm" data-form-type="add">\n                '.concat(this.formLabel(),'\n                <div class="modal__action">\n                    <button type="reset" class="modal__btn pd-5" id="add-doctor-modal__reset">Очистить</button>\n                    <button type="submit" class="modal__btn pd-5" id="add-modal__submit">Создать</button>\n                </div>\n             </form>\n            <span id="modal__close" class="modal__close">ₓ</span>\n        </div>'))}},{key:"uploadForms",value:function(){this.newRecordsForm(),this.reportsForm(),this.errorForm(),this.extendedSearchForm()}},{key:"modalSubmit",value:function(){TableDB.forms.submitLogic(newForm),TableDB.forms.submitLogic(newGroup)}}]),n}(),EquipmentForm=function(){_inherits(n,Forms);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e}return _createClass(n,[{key:"showTable",value:function(t){var e=$(".table-equipment .table__body");e.text(""),t.forEach(function(t){e.append('                    \n                    <tr class="table__body__row" id="'.concat(t.id,'">\n                        <td class="table__body__col" data-id="id">\n                            <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(t.id,'\n                           </td>\n                        <td class="table__body__col" data-id="name">').concat(t.name,'</td>\n                        <td class="table__body__col" data-id="brand" data-brand-id="').concat(t.brand,'">').concat(t.brandName,'</td>\n                        <td class="table__body__col" data-id="country" data-country-id="').concat(t.country,'">').concat(t.countryName,'</td>\n                        <td class="table__body__col" data-id="year">').concat(t.year,'</td>\n                        <td class="table__body__col" data-id="category" data-category-id="').concat(t.category,'">').concat(t.categoryName,'</td>\n                        <td class="table__body__col" data-id="organization" data-organization-id="').concat(t.organization,'">').concat(t.organizationName,"</td>\n                    </tr>"))})}},{key:"createCopiedModal",value:function(n){0<$("._marked").length?(createModal(n),TableDB.forms.setFormTypeEdit(newForm),$("._marked .table__body__col").each(function(t,e){var a=$(e).attr("data-id");$("#".concat(n," #").concat(a)).val(e.innerHTML),$('#JobTitleId .tabsInput[value="'.concat($(e).attr("data-jobtitle-id"),'"]')).prop("selected",!0),$('#brand .tabsInput[value="'.concat($(e).attr("data-brand-id"),'"]')).prop("selected",!0),$('#country .tabsInput[value="'.concat($(e).attr("data-country-id"),'"]')).prop("selected",!0),$('#category .tabsInput[value="'.concat($(e).attr("data-category-id"),'"]')).prop("selected",!0),$('#organization .tabsInput[value="'.concat($(e).attr("data-organization-id"),'"]')).prop("selected",!0)})):createModal("message","Выберите запись")}},{key:"formLabel",value:function(){return'<label for="name" class="modal__label">*Название Оборудования:\n                    <input type="text" name="name" id="name" class="modal__line">\n                </label>\n                <label for="brand" class="modal__label">*Модель:\n                    <select name="brand" id="brand" data-search-list="Brand" class="modal__line">\n                    </select>\n                </label>\n                <label for="country" class="modal__label">*Страна производитель:\n                    <select name="country" id="country" data-search-list="Country" class="modal__line">\n                    </select>\n                </label>\n                <label for="year" class="modal__label">*Год выпуска:\n                    <input type="datetime-local" name="year" id="year" class="modal__line">\n                </label>\n                <label for="category" class="modal__label">*Категория оборудования:\n                    <select name="category" id="category" data-search-list="Category" class="modal__line">\n                    </select>\n                </label>\n                <label for="organization" class="modal__label">*Клиент:\n                    <select name="organization" id="organization" data-search-list="Client" class="modal__line">\n                    </select>\n                </label>'}},{key:"uploadForms",value:function(){this.newRecordsForm(),this.reportsForm(),this.errorForm(),this.extendedSearchForm()}},{key:"modalSubmit",value:function(){TableDB.forms.submitLogic(newForm)}}]),n}(),BrandForm=function(){_inherits(n,Forms);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e}return _createClass(n,[{key:"showTable",value:function(t){var e=$(".table__body");e.text(""),t.forEach(function(t){e.append('                    \n                    <tr class="table__body__row" id="'.concat(t.id,'">\n                        <td class="table__body__col" data-id="id">\n                            <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(t.id,'\n                        </td>\n                        <td class="table__body__col" data-id="name">').concat(t.name,"</td>\n                    </tr>"))})}},{key:"formLabel",value:function(){return'<label for="name" class="modal__label modal__label-full">*Название модели:\n                    <input type="text" name="name" id="name" class="modal__line">\n                </label>'}},{key:"newRecordsForm",value:function(){mainTable.append('\n        <div id="modal" class="modal h-200">\n            <p class="modal__title" id="modal__title" data-modal-title="patient">Создание модели</p>    \n            <form action="" method="post" class="modal__form" id="newForm" data-form-type="add">\n                    '.concat(this.formLabel(),'\n                <div class="modal__action">\n                    <button type="reset" class="modal__btn pd-5" id="add-modal__reset">Очистить</button>\n                    <button type="submit" class="modal__btn pd-5" id="add-modal__submit">Создать</button>\n                </div>\n             </form>\n            <span id="modal__close" class="modal__close">ₓ</span>\n        </div>'))}},{key:"uploadForms",value:function(){this.newRecordsForm(),this.reportsForm(),this.errorForm(),this.extendedSearchForm()}},{key:"modalSubmit",value:function(){TableDB.forms.submitLogic(newForm)}}]),n}(),RepairsForm=function(){_inherits(n,Forms);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e}return _createClass(n,[{key:"showTable",value:function(t){var e=$(".table-repairs .table__body");e.text(""),t.forEach(function(t){null===t.date_end&&(t.date_end="Не указано"),e.append('                    \n                    <tr class="table__body__row" id="'.concat(t.id,'">\n                        <td class="table__body__col" data-id="id">\n                            <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(t.id,'\n                           </td>\n                        <td class="table__body__col" data-id="date_start">').concat(t.date_start,'</td>\n                        <td class="table__body__col" data-id="client" data-client-id="').concat(t.client_id,'">').concat(t.client_name,'</td>\n                        <td class="table__body__col" data-id="equipment_id" data-equipment-id="').concat(t.equipment_id,'">').concat(t.equipment_name,'</td>\n                        <td class="table__body__col" data-id="typeRepair" data-typeRepair-id="').concat(t.typeRepair_id,'">').concat(t.typeRepair_name,'</td>\n                        <td class="table__body__col" data-id="organization" data-staff-id="').concat(t.staff_id,'">').concat(t.staff_name,'</td>\n                        <td class="table__body__col" data-id="date_end">').concat(t.date_end,'</td>\n                        <td class="table__body__col" data-id="price">').concat(t.price,"</td>\n                    </tr>"))})}},{key:"createCopiedModal",value:function(n){0<$("._marked").length?(createModal(n),TableDB.forms.setFormTypeEdit(newForm),$("._marked .table__body__col").each(function(t,e){var a=$(e).attr("data-id");$("#".concat(n," #").concat(a)).val(e.innerHTML),$('#client_id .tabsInput[value="'.concat($(e).attr("data-client-id"),'"]')).prop("selected",!0),$('#staff_id .tabsInput[value="'.concat($(e).attr("data-staff-id"),'"]')).prop("selected",!0),$('#typeRepair_id .tabsInput[value="'.concat($(e).attr("data-typeRepair-id"),'"]')).prop("selected",!0),$('#equipment_id .tabsInput[value="'.concat($(e).attr("data-equipment-id"),'"]')).prop("selected",!0)})):createModal("message","Выберите запись")}},{key:"formLabel",value:function(){return'<label for="date_start" class="modal__label">*Начало ремонта:\n                    <input type="datetime-local" name="date_start" id="date_start" class="modal__line">\n                </label>\n                <label for="client_id" class="modal__label">*Клиент:\n                    <select name="client_id" id="client_id" data-search-list="Client" class="modal__line">\n                    </select>\n                </label>\n                <label for="equipment_id" class="modal__label">*Оборудование:\n                    <select name="equipment_id" id="equipment_id" data-search-list="Equipment" class="modal__line">\n                    </select>\n                </label>\n                <label for="typeRepair_id" class="modal__label">*Вид ремонта:\n                    <select name="typeRepair_id" id="typeRepair_id" data-search-list="TypeRepair" class="modal__line">\n                    </select>\n                </label>\n                <label for="price" class="modal__label">*Цена:\n                    <input type="number" name="price" id="price" readonly class="modal__line">\n                </label>\n                <label for="staff_id" class="modal__label">*Мастер:\n                    <select name="staff_id" id="staff_id" data-search-list="Staff" class="modal__line">\n                    </select>\n                </label>\n                <label for="date_end" class="modal__label">*Дата окончания ремонта:\n                    <input type="datetime-local" name="date_end" id="date_end" class="modal__line">\n                </label>'}},{key:"checkData",value:function(){var t=TableDB.forms.getFormData($(newForm));return $(this).find("input").each(function(t,e){if(removeError($(e)),""===$(e).val()&&"date_end"!==$(e).id)return showError("Поле не может быть пустым",$(e)),0}),t.get("date_start")>=t.get("date_end")&&t.get("date_end")?(createModal("message","Неверная дата"),0):1}},{key:"shipmentForm",value:function(){mainTable.append('\n            <div id="newShipmentForm" class="modal h-200">\n                <form action="" method="post" class="modal__form" id="newShipment">\n                <label for="address" class="modal__label modal__label-full">*Адрес отправки:\n                    <input type="text" name="address" id="address" class="modal__line">\n                </label>\n                <div class="modal__action">\n                    <button type="reset" class="modal__btn pd-5" id="add-doctor-modal__reset">Очистить</button>\n                    <button type="submit" class="modal__btn pd-5" id="add-modal__submit">Создать</button>\n                </div>\n            </form>\n            <span id="modal__close" class="modal__close">ₓ</span>\n        </div>\n        '),this.shipmentData()}},{key:"shipmentData",value:function(){$("#newShipment").submit(function(t){t.preventDefault();var e=TableDB.forms.getFormData($(this));e.append("id",activeRow),TableDB.newShipment(e),closeModal($("#newShipmentForm"))})}},{key:"uploadForms",value:function(){this.newRecordsForm(),this.reportsForm(),this.errorForm(),this.extendedSearchForm(),this.shipmentForm()}},{key:"modalSubmit",value:function(){TableDB.forms.submitLogic(newForm)}}]),n}(),ShipmentForm=function(){_inherits(n,Forms);var a=_createSuper(n);function n(t){var e;return _classCallCheck(this,n),(e=a.call(this)).url=t,e}return _createClass(n,[{key:"showTable",value:function(t){var e=$(".table-shipment .table__body");e.text(""),t.forEach(function(t){e.append('                    \n                    <tr class="table__body__row" id="'.concat(t.id,'">\n                        <td class="table__body__col" data-id="id">\n                            <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(t.id,'\n                        </td>\n                        <td class="table__body__col" data-id="client" data-client-id="').concat(t.client_id,'">').concat(t.client_name,'</td>\n                        <td class="table__body__col" data-id="equipment" data-equipment-id="').concat(t.equipment_id,'">').concat(t.equipment_name,'</td>\n                        <td class="table__body__col" data-id="category" data-category-id="').concat(t.idCategory,'">').concat(t.category_name,'</td>\n                        <td class="table__body__col" data-id="typeRepair" data-typeRepair-id="').concat(t.typeRepair_id,'">').concat(t.typeRepair_name,'</td>\n                        <td class="table__body__col" data-id="date_end">').concat(t.date_end,'</td>\n                        <td class="table__body__col" data-id="address">').concat(t.address,"</td>\n                    </tr>"))})}},{key:"createCopiedModal",value:function(){}},{key:"formLabel",value:function(){return'<label for="idClient" class="modal__label">*Клиент:\n                    <select name="idClient" id="idClient" data-search-list="Client" class="modal__line">\n                    </select>\n                </label>\n                <label for="idEquipment" class="modal__label">*Оборудование:\n                    <select name="idEquipment" id="idEquipment" data-search-list="Equipment" class="modal__line">\n                    </select>\n                </label>\n                <label for="idCategory" class="modal__label">*Категория оборудования:\n                    <select name="idCategory" id="idCategory" data-search-list="Category" class="modal__line">\n                    </select>\n                </label>\n                <label for="idTypeRepair" class="modal__label">*Вид ремонта:\n                    <select name="idTypeRepair" id="idTypeRepair" data-search-list="TypeRepair" class="modal__line">\n                    </select>\n                </label>\n                <label for="date" class="modal__label">*Дата окончания:\n                    <input type="datetime-local" name="shipment.date" id="date" class="modal__line">\n                </label>\n                <label for="address" class="modal__label">*Адрес отправки:\n                    <input type="text" name="shipment.address" id="address" class="modal__line">                \n                </label>'}},{key:"newRecordsForm",value:function(){}},{key:"uploadForms",value:function(){this.newRecordsForm(),this.reportsForm(),this.errorForm(),this.extendedSearchForm()}},{key:"modalSubmit",value:function(){TableDB.forms.submitLogic(newForm)}}]),n}(),Client=function(){_inherits(c,Essence);var l=_createSuper(c);function c(t,e,a,n){var o;return _classCallCheck(this,c),(o=l.call(this,t,e,a,n)).reports=new ClientReports("/api/clientReports.php"),o.forms=new ClientForm(n),new ContextMenu,o}return _createClass(c,[{key:"equipments",value:function(t){console.log(t),$.ajax({url:"".concat(this.url,"?clientId=").concat(t),method:"get",dataType:"json",success:function(t){var e=$(".table-client-equipment-modal .table__body");e.text(""),t.forEach(function(t){e.append('\n                    <tr class="table__body__row modal-row" data-id="'.concat(t.id,'">\n                        <td class="table__body__col" data-id="id">\n                            <img class="img-icon-td" src="img/icon/document.png" alt="">').concat(t.id,'\n                        </td>\n                        <td class="table__body__col" data-id="name">').concat(t.name,'</td>\n                        <td class="table__body__col" data-id="year">').concat(t.year,'</td>\n                        <td class="table__body__col" data-id="countryName">').concat(t.countryName,'</td>\n                        <td class="table__body__col" data-id="categoryName">').concat(t.categoryName,'</td>\n                        <td class="table__body__col" data-id="brandName">').concat(t.brandName,"</td>\n                    </tr>"))})}})}}]),c}(),Countries=function(){_inherits(c,Essence);var l=_createSuper(c);function c(t,e,a,n){var o;return _classCallCheck(this,c),(o=l.call(this,t,e,a,n)).reports=new CountriesReports("/api/countriesReports.php"),o.forms=new CountriesForm(n),new ContextMenu,o}return c}(),Staff=function(){_inherits(c,Essence);var l=_createSuper(c);function c(t,e,a,n){var o;return _classCallCheck(this,c),(o=l.call(this,t,e,a,n)).reports=new StaffReports("/api/staffReports.php"),o.forms=new StaffForm(n),o.job=new JobTitleModal,new ContextMenu,o}return c}(),Job=function(){_inherits(c,Essence);var l=_createSuper(c);function c(t,e,a,n){var o;return _classCallCheck(this,c),(o=l.call(this,t,e,a,n)).reports=new JobReports("/api/jobReports.php"),o.forms=new JobForm(n),new ContextMenu,o}return c}(),TypeRepair=function(){_inherits(c,Essence);var l=_createSuper(c);function c(t,e,a,n){var o;return _classCallCheck(this,c),(o=l.call(this,t,e,a,n)).reports=new TypeRepairReports("/api/typeRepairReports.php"),o.forms=new TypeRepairForm(n),o.group=new Group(n),new ContextMenu,o}return c}(),Category=function(){_inherits(c,Essence);var l=_createSuper(c);function c(t,e,a,n){var o;return _classCallCheck(this,c),(o=l.call(this,t,e,a,n)).reports=new CategoryReports("/api/categoryReports.php"),o.forms=new CategoryForm(n),o.group=new Group(n),new ContextMenu,o}return c}(),Equipment=function(){_inherits(c,Essence);var l=_createSuper(c);function c(t,e,a,n){var o;return _classCallCheck(this,c),(o=l.call(this,t,e,a,n)).reports=new EquipmentReports("/api/equipmentReports.php"),o.forms=new EquipmentForm(n),o.brand=new BrandModal,o.country=new CountryModal,o.category=new CategoryModal,o.client=new ClientModal,new ContextMenu,o}return c}(),Brand=function(){_inherits(c,Essence);var l=_createSuper(c);function c(t,e,a,n){var o;return _classCallCheck(this,c),(o=l.call(this,t,e,a,n)).reports=new BrandReports("/api/brandReports.php"),o.forms=new BrandForm(n),new ContextMenu,o}return c}(),Repairs=function(){_inherits(c,Essence);var l=_createSuper(c);function c(t,e,a,n){var o;return _classCallCheck(this,c),(o=l.call(this,t,e,a,n)).reports=new RepairsReports("/api/repairsReports.php"),o.forms=new RepairsForm(n),o.client=new ClientModal,o.staff=new StaffModal,o.typeRepair=new TypeRepairModal,o.equipment=new EquipmentModal,new ContextMenu,o}return _createClass(c,[{key:"newShipment",value:function(t){$.ajax({url:"".concat(this.url,"?shipment=true"),method:"post",async:!1,processData:!1,contentType:!1,data:t,success:function(t){createModal("message",t.message),$(newForm).trigger("reset")},error:function(t){createModal("message",t.responseJSON.message)}})}}]),c}(),About=function(){function t(){_classCallCheck(this,t),this.aboutModal}return _createClass(t,[{key:"aboutModal",get:function(){mainTable.append('<div id="about" class="modal h-350 about">\n        <p class="modal__title no-flex-auto" id="modal__title" data-modal-title="job">О программе</p>\n\n        <div class="modal__body">\n\n            <div class="about__text">\n                Программа "\'УРМ\' Учет за ремонтируемым оборудованием" создана для учета процесса ремонта оборудования в сервисных центрах\n            </div>\n\n            <div class="about__subtitle">\n                <span class="bold-weight">Особенности программы:</span>\n            </div>\n\n            <div class="about__text">\n                <p class="about__text">Работа с данными</p>\n                <p class="about__text">Формирование отчетов</p>\n                <p class="about__text">Учет за ремонтируемым оборудованием</p>\n                <p class="about__text">Вывод данных в excel</p>\n                <p class="about__text">Свое контекстное меню</p>\n            </div>\n\n            <div class="about__version"><span class="bold-weight d-block">Версия программы:</span>1.0-29.05.2023</div>\n\n            <div class="about__subtitle">\n                <span class="bold-weight">Над программой работали:</span>\n            </div>\n\n            <div class="about__author">\n                <p class="about__text"><span class="bold-weight d-block">Главный программист:</span> Боев Максим Михайлович</p>\n                <p class="about__text"><span class="bold-weight d-block">ux/ui-дизайнер:</span> Головко Виктория Сергеевна</p>\n            </div>\n\n        </div>\n\n    </div>')}}]),t}(),Shipment=function(){_inherits(c,Essence);var l=_createSuper(c);function c(t,e,a,n){var o;return _classCallCheck(this,c),(o=l.call(this,t,e,a,n)).reports=new ShipmentReports("/api/shipmentReports.php"),o.forms=new ShipmentForm(n),o.client=new ClientModal,o.category=new CategoryModal,o.typeRepair=new TypeRepairModal,o.equipment=new EquipmentModal,o}return _createClass(c,[{key:"delete",value:function(){}},{key:"edit",value:function(){}},{key:"new",value:function(){}}]),c}(),ContextMenu=function(){function o(){_classCallCheck(this,o),this.init()}return _createClass(o,[{key:"init",value:function(){$(".main__table").mousedown(function(t){document.oncontextmenu=function(){return!1};var e,a,n=t.target.classList.contains("context-menu__link");3===t.which&&"flex"!==$("#overlay").css("display")?(o.deleteContextMenu(),setMarkedClick(t),e=t.pageX,a=t.pageY,e<=221&&(e=t.pageX+10),e>=$(window).width()-221&&(e=$(window).width()-221),a>=$(window).height()-151&&(a=$(window).height()-161),$("<div/>",{class:"context-menu"}).css({left:e+"px",top:a+"px"}).appendTo("body").append($('<ul class="context-menu__list"/>').append('<li class="context-menu__line"><a class="context-menu__link" id="context-form-delete" href="#">Удалить запись</a></li>').append('<li class="context-menu__line"><a class="context-menu__link" id="context-form-new" href="#">Создать запись</a></li>').append('<li class="context-menu__line"><a class="context-menu__link" id="context-form-copy" href="#">Создать копию записи</a></li>').append('<li class="context-menu__line"><a class="context-menu__link" id="context-form-edit" href="#">Изменить запись</a></li>')).show("fast")):n||o.deleteContextMenu(),$("#context-form-delete").click(function(t){t.preventDefault(),TableDB.delete(activeRow),o.deleteContextMenu()}),$("#context-form-copy").click(function(t){t.preventDefault(),TableDB.forms.createCopiedModal("modal"),o.deleteContextMenu()}),$("#context-form-edit").click(function(t){t.preventDefault(),onEditClick("modal"),o.deleteContextMenu()}),$("#context-form-new").click(function(t){t.preventDefault(),createModal("modal"),o.deleteContextMenu()})})}}],[{key:"deleteContextMenu",value:function(){$("*").removeClass("selected-html-element"),$(".context-menu").remove()}}]),o}(),tableName=$(".main__table").attr("data-table-name"),pageTitle=$("#title"),mainTitle=$(".top-main__title");initPage();var tableTab,newForm,newGroup,addTabBtn=$("#form-add-tab"),settingTabBtn=$("#form-setting-tab"),addBtn=$("#form-add"),editBtn=$("#form-edit"),copiedBtn=$("#form-copied"),deleteBtn=$("#form-delete"),searchBtn=$("#form-search"),extendedSearchBtn=$("#extended-search-setting"),aboutBtn=$("#about-info"),fieldSearchReset=$(".field-search__reset"),reportsType=$(".reports-type"),reportsBtn=$(".reports-button"),modalSearchItem=$(".modal__search-item"),table=$(".table"),searchForm=$("#field-search"),extendedSearchForm=$("#extended-search-form"),reportsForm=$("#reports-form"),tapped=!1,activeRow=null;function activeHeaderLink(){$(".menu__link").click(function(t){var e;t.target.classList.contains("menu__link_active")||((e=$(".menu__link_active")).parent().find("._active").removeClass("_active"),e.removeClass("menu__link_active"),$(this).addClass("menu__link_active"),$(this).parent().find(".menu__sublist").addClass("_active"))})}function ibg(){for(var t=document.querySelectorAll(".ibg"),e=0;e<t.length;e++)t[e].querySelector("img")&&(t[e].style.backgroundImage="url("+t[e].querySelector("img").getAttribute("src")+")")}function testWebP(t){var e=new Image;e.onload=e.onerror=function(){t(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}function GetNameTable(t){switch(t){case"client":TableDB=new Client("Создание клиента","Редактирование клиента","Информация о клиенте","/api/client.php");break;case"countries":TableDB=new Countries("Создание страны","Редактирование страны","Информация о стране","/api/countries.php");break;case"staff":TableDB=new Staff("Создание сотрудника","Редактирование сотрудника","Информация об персонале","/api/staff.php");break;case"job":TableDB=new Job("Создание должности","Редактирование должности","Информация об должностях","/api/job.php");break;case"typeRepair":TableDB=new TypeRepair("Создать новый вид ремонта","Редактирование вида ремонта","Виды ремонта","/api/typeRepair.php");break;case"category":TableDB=new Category("Создать категорию","Редактирование категории","Категории оборудований","/api/category.php");break;case"equipment":TableDB=new Equipment("Создать оборудование","Редактирование оборудования","Оборудования","/api/equipment.php");break;case"brand":TableDB=new Brand("Создать модель","Редактирование модели","Модель","/api/brand.php");break;case"repairs":TableDB=new Repairs("Создать ремонтную запись","Редактирование ремонтной записи","Ремонтная запись","/api/repairs.php");break;case"shipment":TableDB=new Shipment("Создать акт отгрузки","Редактировать акт отгрузки","Акт отгрузки","/api/shipment.php")}}function closeModal(t){--zIndex,t.animate({opacity:0},198,function(){$(this).css("display","none"),t.find(".modal__title").text(TableDB.textAdd),t.find("#add-modal__submit").text("Создать"),$(this).css("z-index",zIndex),zIndex<=102&&$("body").css("overflow-y","visible")}),$(".table__tab").find("input").prop("checked",!1),activeTab=0}function createModal(t){var e,a,n,o,l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,c=$("#".concat(t));c&&(zIndex=zIndex<102?102:++zIndex,e=null!==l?l:TableDB.textAdd,$("#".concat(t," .modal__title")).text(e),"message"===c.attr("id")?(c.css("display","flex").css("z-index",zIndex).animate({opacity:1},198),$("body").css("overflow-y","hidden"),$("#".concat(t," .modal__close-btn")).one("click",function(){closeModal(c)}),a=$(".modal__progress"),n=1,o=setInterval(function(){100<=n?clearInterval(o):a.css("width",++n+"%")},20),setTimeout(function(){--zIndex,c.animate({opacity:0},198,function(){$(this).css("display","none"),c.find(".modal__title").text(TableDB.textAdd),c.find("#add-modal__submit").text("Создать"),$(this).css("z-index",zIndex),zIndex<=102&&$("body").css("overflow-y","visible")})},2e3)):(c.css("display","flex").css("z-index",zIndex).animate({opacity:1},198),$("body").css("overflow-y","hidden"),$("#".concat(t," .modal__close-btn, #").concat(t," .modal__close, #overlay")).one("click",function(){closeModal(c),TableDB.forms.setFormTypeAdd(newForm)})))}function createCopiedGroupModal(t,e){TableDB.group.createCopiedGroupModal(t,e)}function showDropDownMenu(){$(".action__btn-menu").click(function(t){var e=$("#".concat($(this).attr("data-downMenuName")));e.hasClass("_hidden")?($(".down-menu").not("._hidden").addClass("_hidden"),e.removeClass("_hidden")):e.addClass("_hidden")})}function showTable(){""===searchLine.val().trim()?TableDB.rows:findSearchData()}function initPage(){new About,GetNameTable(tableName),mainTitle.text(TableDB.title),pageTitle.text(TableDB.title),newForm=$("#newForm"),newGroup=$("#newGroup"),searchListSetting=$(".modal__search-list"),TableDB.forms.modalSubmit(),showDropDownMenu(),showTable(),getListSearchItem()}function findSearchData(){var t;""===searchLine.val().trim()?createModal("message","Поле для поиска не может быть пустым"):((t={})[searchLine.attr("data-search-tag")]=searchLine.val(),TableDB.forms.search(t))}function getListSearchItem(){$(".main-table .table__header__col").each(function(t,e){var a=$(e).attr("data-search-tag");searchListSetting.append('\n            <button class="modal__search-item" data-search-item-tag="'.concat(a,'">').concat($(e).text(),"</button>\n        ")),$(".modal__search-item").first().addClass("modal__search-item_active")}),changeSearchSettingLabel()}function changeSearchSettingLabel(){var t=$(".modal__search-item_active"),e=t.text(),a=t.attr("data-search-item-tag");searchLine.attr("placeholder","Поиск по ".concat(e)),searchLine.attr("data-search-tag","".concat(a))}function removeError(t){var e=t.parent().children(".modal__error");e&&e.remove()}function showError(t,e){var a=document.createElement("p");a.classList.add("modal__error"),a.textContent=t,e.parent().append(a)}function setMarkedClick(t){var e=t.target.parentNode;e.classList.contains("table__header__row")||3===t.which||e.classList.contains("main__table")||e.classList.contains("modal-row")||e.classList.contains("table__header__row")||($("._marked").removeClass("_marked"),"TR"===e.tagName&&($("#".concat(e.id)).toggleClass("_marked"),activeRow=e.id))}function click(t,e){t.preventDefault(),t.stopPropagation(),setMarkedClick(t),!1===tapped?tapped=setTimeout(function(){tapped=!1},250):(clearTimeout(tapped),tapped=!1,onEditClick(e))}function onEditClick(t){$("#modal__title").text(TableDB.textEdit),$("#add-modal__submit").text("Изменить"),TableDB.forms.createCopiedModal(t),TableDB.forms.setFormTypeEdit(newForm)}jQuery(function(){jQuery(".menu__icon").click(function(t){jQuery(".menu__icon, .menu__body").toggleClass("active"),jQuery("body").toggleClass("lock")}),jQuery(".menu__label").click(function(t){jQuery(".menu__icon, .menu__body").removeClass("active"),jQuery("body").removeClass("lock")})}),ibg(),testWebP(function(t){t?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}),window.matchMedia("(max-width: 993px)").matches&&$(".action__left").append($("#setting-button").css("opacity",1)),newGroup.submit(function(t){t.preventDefault()}),deleteBtn.click(function(t){t.preventDefault(),TableDB.delete(activeRow)}),searchBtn.click(function(t){t.preventDefault(),findSearchData()}),$(document).ready(function(){addBtn.click(function(t){TableDB.forms.setFormTypeAdd(newForm),createModal("modal")}),copiedBtn.click(function(){TableDB.forms.createCopiedModal("modal")}),editBtn.click(function(){onEditClick("modal")}),table.click(function(t){click(t,"modal")}),extendedSearchBtn.click(function(t){createModal("extended-search-modal")}),aboutBtn.click(function(t){createModal("about","О программе")}),fieldSearchReset.click(function(t){showTable()}),$("#add-doctor-modal__reset").click(function(t){showTable()}),activeHeaderLink(),addTabBtn.click(function(t){var e;createModal("group-modal","Создание группы"),activeTab?(e=$(".table__tab[data-modal-menu-id=".concat(activeTab,"]")),$("#listGroups").text("").append("\n                <option class='tabsInput' value=\"".concat(activeTab,'">').concat($(e).attr("data-modal-menu-title"),"</option>\n            "))):$("#listGroups").text("").append("\n                <option class='tabsInput' value=\"0\">Нет родителей</option>\n            "),TableDB.forms.setFormTypeAddGroup(newGroup)}),settingTabBtn.click(function(t){createModal("tabsModal","Управление вкладками")}),new Promise(function(t){setTimeout(function(){t(1)},1e3)}).then(function(t){})}),modalSearchItem.click(function(t){t.preventDefault(),$(".modal__search-item_active").removeClass("modal__search-item_active"),$(this).addClass("modal__search-item_active"),changeSearchSettingLabel()}),reportsBtn.click(function(t){activeRow?this.id?createModal("newShipmentForm","Акт отгрузки"):($("#reports").attr("data-type",$(this).attr("data-reports-type")),createModal("reports","Вывести отчет")):createModal("message","Выберите запись")}),extendedSearchForm.submit(function(t){t.preventDefault();var e,a={},n=_createForOfIteratorHelper(TableDB.forms.getFormData($(extendedSearchForm)).entries());try{for(n.s();!(e=n.n()).done;){var o=e.value;""!==o[1].trim()&&(a[o[0]]=o[1])}}catch(t){n.e(t)}finally{n.f()}$.isEmptyObject(a)||TableDB.forms.search(a)}),searchForm.submit(function(t){t.preventDefault(),findSearchData()}),reportsType.click(function(t){t.preventDefault();var e=new FormData;e.append("id","".concat(activeRow)),e.append("exportType","".concat($(this).attr("name"))),e.append("reportType","".concat($("#reports").attr("data-type"))),TableDB.reports.dataReport(e)});